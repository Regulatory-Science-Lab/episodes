% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/single_dose_clean.R
\name{single_dose_clean}
\alias{single_dose_clean}
\title{Clean and collapse single-dose cancer treatment lines}
\usage{
single_dose_clean(ep_data, drug_separator = ",", overlap_threshold = 1)
}
\arguments{
\item{ep_data}{data frame containing line-level treatment data. Must include
columns: \code{patientid}, \code{linestartdate}, \code{lineenddate}, \code{linenumber}, \code{linename}.}

\item{drug_separator}{A character string used to split multiple drugs in \code{linename}.
Default is ",".}

\item{overlap_threshold}{An integer indicating the minimum number of overlapping
drugs between line names required to consider lines similar enough to merge.
Default is 1.}
}
\value{
A cleaned \code{data.frame} with the same columns (\code{patientid}, \code{linestartdate},
\code{lineenddate}, \code{linename}, \code{linenumber}), but with collapsed or dropped single-day lines.
}
\description{
This function identifies and cleans single-day treatment lines in a longitudinal
drug exposure dataset. It attempts to merge single-day lines with adjacent lines
if they share overlapping drugs, and drops lines that are isolated and non-mergeable.
}
\details{
It supports threshold-based partial overlap merging and reconstructs treatment
episodes by recomputing line numbers after merging or dropping.
}
\examples{
\dontrun{
cleaned_lines <- single_dose_clean(ep_data)
}
}
