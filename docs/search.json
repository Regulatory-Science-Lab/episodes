[{"path":[]},{"path":"/articles/drug_episodes.html","id":"prepping-the-episode-data","dir":"Articles","previous_headings":"","what":"Prepping the episode data","title":"Constructing drug episodes and deriving Weibull transition estimates: Assumptions and Workflow","text":"first function package workflow prep_episode_data. used clean tumour-specific Flatiron drug episodes datasets. dataset finally outputs cleaned merged drug episodes 1st, 2nd 3rd line tumour-specific patients received treatment interest. function can take regular example, lung match either cisplatin carboplatin (often interchanged protocols). exact = TRUE can specified match exactly treatment without combination drugs. lung, specify exact = FALSE cisplatin carobplatin rarely given alone. However, ohter tumours produced drug episodes match exactly treatment name.","code":"drug_episodes <- prep_episode_data(tumour = \"nsclc\", treatment = \"cisplatin|carboplatin\", drug_separator = \",\",                               overlap_threshold = 1, exact = FALSE) ## The total number of nsclc patients is 18419 ## The total number of nsclc patients is 16541 ## The total number of nsclc first-line patients is 9333 ## The total number of nsclc second-line patients is 1016 ## The total number of nsclc third-line patients is 324 ##  ##  ## Table: Number of patients who received cisplatin|carboplatin by line of therapy ##  ## |Line_of_Therapy | Number_of_Patients| ## |:---------------|------------------:| ## |First Line      |               9333| ## |Second Line     |               1016| ## |Third Line      |                324| ## The total number of nsclc patients with overlapping lines that were filtered out is 10673 ## The total number of nsclc patients with single doses that were filtered out is 10022 ## The total number of nsclc patients with treatment start pre-2010 that were filtered out is 20 head(drug_episodes) ## # A tibble: 6 × 12 ##   patientid linestartdate lineenddate linename linenumber chemo_line prior_lines ##   <chr>     <date>        <date>      <chr>         <int>      <int>       <dbl> ## 1 000398B8… 2023-03-28    2023-04-11  carbopl…          1          1           0 ## 2 000398B8… 2023-07-05    2023-10-18  pemetre…          2          1           0 ## 3 00094A26… 2018-03-19    2018-08-27  bevaciz…          1          1           0 ## 4 00094A26… 2018-12-12    2020-06-24  osimert…          2          1           0 ## 5 0010FDA7… 2016-01-19    2016-04-12  carbopl…          1          1           0 ## 6 0010FDA7… 2017-02-13    2018-02-01  nivolum…          2          1           0 ## # ℹ 5 more variables: Date_LastFollowUp <date>, death_date <date>, ## #   progression_date <date>, next_linestart <date>, days_to_next_line <dbl>"},{"path":"/articles/drug_episodes.html","id":"overlapping-lines","dir":"Articles","previous_headings":"","what":"Overlapping lines","title":"Constructing drug episodes and deriving Weibull transition estimates: Assumptions and Workflow","text":"prep_episode_data function wraps function deal overlapping lines linestartdate lineenddate previous next line overlapped. episode flagged overlapping start date preceded end date prior episode. Contiguous overlapping lines grouped using cumulative indexing strategy. Specifically, new group identifier initiated time non-overlapping line encountered, overlapping lines shared identifier. Within group, start end dates recalculated span earliest latest dates, respectively, unique drug names combined single standardized line label. Duplicate redundant drug entries cleaned using regular expressions ensure consistency.Finally, collapsed episodes renumbered sequentially patient reflect revised line structure.","code":"# Sample overlapping input example_data <- tibble::tibble(   patientid = c(1, 1, 1),   linenumber = c(1, 2, 3),   linename = c(\"cisplatin\", \"cisplatin\", \"gemcitabine\"),   linestartdate = lubridate::ymd(c(\"2020-01-01\", \"2020-01-15\", \"2020-02-01\")),   lineenddate = lubridate::ymd(c(\"2020-01-30\", \"2020-02-15\", \"2020-03-01\")) )  example_data ## # A tibble: 3 × 5 ##   patientid linenumber linename    linestartdate lineenddate ##       <dbl>      <dbl> <chr>       <date>        <date>      ## 1         1          1 cisplatin   2020-01-01    2020-01-30  ## 2         1          2 cisplatin   2020-01-15    2020-02-15  ## 3         1          3 gemcitabine 2020-02-01    2020-03-01 # Collapse overlapping lines collapsed_data <- collapse_overlapping_lines(example_data)  print(collapsed_data) ## # A tibble: 1 × 6 ##   patientid group_id linestartdate lineenddate linename               linenumber ##       <dbl>    <int> <date>        <date>      <chr>                       <int> ## 1         1        1 2020-01-01    2020-03-01  cisplatin, gemcitabine          1"},{"path":"/articles/drug_episodes.html","id":"clean-up-single-doses-defined-as-lines","dir":"Articles","previous_headings":"","what":"Clean up single doses defined as lines","title":"Constructing drug episodes and deriving Weibull transition estimates: Assumptions and Workflow","text":"Flatiron dataset, found several lines linestartdate equal lineenddate. likely single doses administered period time, thus categorized line therapy. single_dose_clean function aims clean collapse single-day episodes either: 1. Merging temporally adjacent lines overlapping drug names, 2. Dropping appear spurious disconnected. drug_separator parameter can used specify combination drug written dataset e.g. name cisplatin, gemcitabine, parameter set ,. First, treatment episodes chronologically ordered flagged single-day lines linestartdate lineenddate equal. lines evaluated context immediate neighbors (preceding following lines) within patient. merging criterion applied whereby single-day line considered consolidation shares one drug components temporally adjacent line. overlap can adjusted overlap_threshold parameter (default 1). Overlap assessed level individual drug names, allowing flexibility combination regimens. overlap criterion met, single-day line merged adjacent episode, resulting line defined earliest start date, latest end date, deduplicated, alphabetically ordered list drug components. Single-day lines fail meet merging criterion—.e., isolated non-overlapping adjacent lines—flagged removal, assumption may reflect data entry inconsistencies non-line therapeutic events.","code":"# Sample data example_data <- tibble::tibble(   patientid = c(1, 1, 1),   linenumber = c(1, 2, 3),   linename = c(\"cisplatin\", \"cisplatin\", \"gemcitabine\"),   linestartdate = ymd(c(\"2022-01-01\", \"2022-01-15\", \"2022-01-15\")),   lineenddate   = ymd(c(\"2022-01-10\", \"2022-01-15\", \"2022-01-15\"))  # line 3 is single-day )  example_data ## # A tibble: 3 × 5 ##   patientid linenumber linename    linestartdate lineenddate ##       <dbl>      <dbl> <chr>       <date>        <date>      ## 1         1          1 cisplatin   2022-01-01    2022-01-10  ## 2         1          2 cisplatin   2022-01-15    2022-01-15  ## 3         1          3 gemcitabine 2022-01-15    2022-01-15 # Clean single-day lines cleaned_data <- single_dose_clean(example_data)  print(cleaned_data) ## # A tibble: 1 × 5 ##   patientid linestartdate lineenddate linename  linenumber ##       <dbl> <date>        <date>      <chr>          <int> ## 1         1 2022-01-01    2022-01-15  cisplatin          1"},{"path":"/articles/drug_episodes.html","id":"time-period-restriction","dir":"Articles","previous_headings":"","what":"Time period restriction","title":"Constructing drug episodes and deriving Weibull transition estimates: Assumptions and Workflow","text":"found Flatiron dataset, patients started treatment 2010, significant bulk treatment start date mass centered 2010. Given advancements differences treatments, well issue patients biasing survival times unusually long tail, filtered dataset tumour patients 2010.","code":""},{"path":"/articles/drug_episodes.html","id":"cutoffs-for-time-to-death-time-to-progression-etc-","dir":"Articles","previous_headings":"","what":"Cutoffs for time to death, time to progression etc.","title":"Constructing drug episodes and deriving Weibull transition estimates: Assumptions and Workflow","text":"terms cutoffs considered valid time death -treatment, time progression -treatment, time next line -treatment time -treatment, decided use 75 % quantile cutoff. ensures cutoff tumour-specific. cutoff point supported statistical measures, namely log-rank test often showed separation groups around Q3 point, Classification Regression Tree (CART) whose first split point also consistent Q3 Guassian Mixture clustering model, often clustered observations beyond Q3 together.","code":""},{"path":"/articles/drug_episodes.html","id":"progression-from-on-treatment","dir":"Articles","previous_headings":"","what":"Progression from on-treatment","title":"Constructing drug episodes and deriving Weibull transition estimates: Assumptions and Workflow","text":"Flatiron dataset, several progression dates available single patient depending received scans. valid -treatment progression state transition particular treatment, consider progression occurs atleast 7 days start line-treatment atleast within 2-weeks line end date. model transitions target line, transition new line also considered progression.","code":""},{"path":"/articles/drug_episodes.html","id":"death-date-granularity","dir":"Articles","previous_headings":"","what":"Death Date granularity","title":"Constructing drug episodes and deriving Weibull transition estimates: Assumptions and Workflow","text":"Flatiron dataset, month year death patient exact date. Thus, infer exact date, take maximum date date last followup, progression date, date last clinical note, date treatment end depending information available. dates available, date inffered 15th, approximately middle month.","code":""},{"path":"/articles/drug_episodes.html","id":"constructing-the-drug-episodes","dir":"Articles","previous_headings":"","what":"Constructing the drug episodes","title":"Constructing drug episodes and deriving Weibull transition estimates: Assumptions and Workflow","text":"construct_state_episodes function can used construct drug episodes form can fed Weibull models derive sojourn survival time. takes cleaned output prep_episodes_data.","code":"state_episodes <- construct_state_episodes(drug_episodes) ##  ##  ## Table: Filtered Transition Counts Table ##  ## |state                    |next_state    |    n| ## |:------------------------|:-------------|----:| ## |Death                    |NA            | 6854| ## |On_Treatment_Target_Line |Death         |  167| ## |On_Treatment_Target_Line |off_treatment | 3161| ## |On_Treatment_Target_Line |progression   | 6237| ## |On_Treatment_Target_Line |NA            |  278| ## |off_treatment            |Death         | 1292| ## |off_treatment            |progression   |  999| ## |off_treatment            |NA            |  870| ## |progression              |Death         | 5395| ## |progression              |NA            | 1841| drug_transitions <- state_episodes$drug_transitions  lines <- state_episodes$lines"},{"path":"/articles/drug_episodes.html","id":"deriving-the-weibull-shape-and-scale-parameters","dir":"Articles","previous_headings":"","what":"Deriving the Weibull shape and scale parameters","title":"Constructing drug episodes and deriving Weibull transition estimates: Assumptions and Workflow","text":"derive shape scale parameters, use Weibull model accelerated failure time parameterization flexsurv package. derive shape scale parameters exit -treatment, exit -treatment exit progression. use state_exit_weibull_estimates function, pass drug_episodes lines datasets, outputs construct_state_episodes function. three regressions, adjust number prior lines (unless patients prior lines). exit progression, also binary indicator variable (LoT_progression teo levels LoT clinical) control fact progression derived patients clinically progression date inferred others change line. control artifact patients proxied progressed change line therapy likely stay progression state longer period time.","code":"params_results <- state_exit_weibull_estimates(drug_transitions, lines)  params_results ## # A tibble: 3 × 7 ##   state_transition         shape shape_lci shape_uci scale scale_lci scale_uci ##   <chr>                    <dbl>     <dbl>     <dbl> <dbl>     <dbl>     <dbl> ## 1 On_Treatment_Target_Line 1.01      0.992     1.02   222.      217.      227. ## 2 off_treatment            0.699     0.678     0.721  318.      295.      343. ## 3 progression              0.848     0.831     0.866  303.      285.      322."},{"path":"/articles/drug_episodes_breast.html","id":"sample-size-breakdown","dir":"Articles","previous_headings":"","what":"Sample Size Breakdown","title":"Constructing drug episodes for breast (capecitabine)","text":"","code":"## The total number of breast patients is 14162 ## The total number of breast patients is 11601 ## The total number of breast first-line patients is 872 ## The total number of breast second-line patients is 889 ## The total number of breast third-line patients is 998 ##  ##  ## Table: Number of patients who received capecitabine by line of therapy ##  ## |Line_of_Therapy | Number_of_Patients| ## |:---------------|------------------:| ## |First Line      |                872| ## |Second Line     |                889| ## |Third Line      |                998| ## The total number of breast patients with overlapping lines that were filtered out is 2759 ## The total number of breast patients with single doses that were filtered out is 2746 ## The total number of breast patients with treatment start pre-2010 that were filtered out is 30 ##  ##  ## Table: Filtered Transition Counts Table ##  ## |state                    |next_state    |    n| ## |:------------------------|:-------------|----:| ## |Death                    |NA            | 1989| ## |On_Treatment_Target_Line |Death         |   42| ## |On_Treatment_Target_Line |off_treatment |  353| ## |On_Treatment_Target_Line |progression   | 2201| ## |On_Treatment_Target_Line |NA            |  108| ## |off_treatment            |Death         |  188| ## |off_treatment            |progression   |  126| ## |off_treatment            |NA            |   39| ## |progression              |Death         | 1759| ## |progression              |NA            |  568|"},{"path":"/articles/drug_episodes_breast.html","id":"descriptive-statistics-of-episodes-stratified-by-line-and-state","dir":"Articles","previous_headings":"","what":"Descriptive statistics of episodes stratified by line and state","title":"Constructing drug episodes for breast (capecitabine)","text":"Summary Episode Duration Line State (Excl. Death State)","code":""},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":"/articles/drug_episodes_breast.html","id":"restricted-mean-survival-time-survival-comparisons-across-lines","dir":"Articles","previous_headings":"Cut-points","what":"Restricted mean survival time survival: comparisons across lines","title":"Constructing drug episodes for breast (capecitabine)","text":"Restricted Mean Survival Time Comparisons Lines Therapy","code":""},{"path":[]},{"path":[]},{"path":"/articles/drug_episodes_breast.html","id":"competing-risks-regression","dir":"Articles","previous_headings":"Cut-points","what":"Competing Risks Regression","title":"Constructing drug episodes for breast (capecitabine)","text":"","code":"## Competing Risks Regression ##  ## Call: ## crr(ftime = fg_data$ftime, fstatus = fg_data$fstatus, cov1 = model.matrix(~factor(fg_data$group))[,  ##     -1]) ##  ##                          coef exp(coef) se(coef)     z p-value ## factor(fg_data$group)2 0.3016      1.35    0.366 0.825    0.41 ## factor(fg_data$group)3 0.0802      1.08    0.393 0.204    0.84 ##  ##                        exp(coef) exp(-coef)  2.5% 97.5% ## factor(fg_data$group)2      1.35      0.740 0.660  2.77 ## factor(fg_data$group)3      1.08      0.923 0.501  2.34 ##  ## Num. cases = 2596 ## Pseudo Log-likelihood = -330  ## Pseudo likelihood ratio test = 0.72  on 2 df,"},{"path":"/articles/drug_episodes_crc.html","id":"sample-size-breakdown","dir":"Articles","previous_headings":"","what":"Sample Size Breakdown","title":"Constructing drug episodes for CRC (FOLFIRI)","text":"","code":"## The total number of crc patients is 11340 ## The total number of crc patients is 11340 ## The total number of crc first-line patients is 1800 ## The total number of crc second-line patients is 2718 ## The total number of crc third-line patients is 697 ##  ##  ## Table: Number of patients who received folfiri by line of therapy ##  ## |Line_of_Therapy | Number_of_Patients| ## |:---------------|------------------:| ## |First Line      |               1800| ## |Second Line     |               2718| ## |Third Line      |                697| ## The total number of crc patients with overlapping lines that were filtered out is 5215 ## The total number of crc patients with single doses that were filtered out is 5148 ## The total number of crc patients with treatment start pre-2010 that were filtered out is 8 ##  ##  ## Table: Filtered Transition Counts Table ##  ## |state                    |next_state    |    n| ## |:------------------------|:-------------|----:| ## |Death                    |NA            | 3546| ## |On_Treatment_Target_Line |Death         |   22| ## |On_Treatment_Target_Line |off_treatment | 1127| ## |On_Treatment_Target_Line |progression   | 3811| ## |On_Treatment_Target_Line |NA            |   62| ## |off_treatment            |Death         |  334| ## |off_treatment            |progression   |  421| ## |off_treatment            |NA            |  372| ## |progression              |Death         | 3189| ## |progression              |NA            | 1043|"},{"path":"/articles/drug_episodes_crc.html","id":"descriptive-statistics-of-episodes-stratified-by-line-and-state","dir":"Articles","previous_headings":"","what":"Descriptive statistics of episodes stratified by line and state","title":"Constructing drug episodes for CRC (FOLFIRI)","text":"Summary Episode Duration Line State (Excl. Death State)","code":""},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":"/articles/drug_episodes_crc.html","id":"restricted-mean-survival-time-survival-comparisons-across-lines","dir":"Articles","previous_headings":"Cut-points","what":"Restricted mean survival time survival: comparisons across lines","title":"Constructing drug episodes for CRC (FOLFIRI)","text":"Restricted Mean Survival Time Comparisons Lines Therapy","code":""},{"path":[]},{"path":[]},{"path":"/articles/drug_episodes_lung.html","id":"sample-size-breakdown","dir":"Articles","previous_headings":"","what":"Sample Size Breakdown","title":"Constructing drug episodes for lung (cisplatin|carboplatin)","text":"","code":"## The total number of nsclc patients is 18419 ## The total number of nsclc patients is 16541 ## The total number of nsclc first-line patients is 9333 ## The total number of nsclc second-line patients is 1016 ## The total number of nsclc third-line patients is 324 ##  ##  ## Table: Number of patients who received cisplatin|carboplatin by line of therapy ##  ## |Line_of_Therapy | Number_of_Patients| ## |:---------------|------------------:| ## |First Line      |               9333| ## |Second Line     |               1016| ## |Third Line      |                324| ## The total number of nsclc patients with overlapping lines that were filtered out is 10673 ## The total number of nsclc patients with single doses that were filtered out is 10022 ## The total number of nsclc patients with treatment start pre-2010 that were filtered out is 20 ##  ##  ## Table: Filtered Transition Counts Table ##  ## |state                    |next_state    |    n| ## |:------------------------|:-------------|----:| ## |Death                    |NA            | 6854| ## |On_Treatment_Target_Line |Death         |  167| ## |On_Treatment_Target_Line |off_treatment | 3161| ## |On_Treatment_Target_Line |progression   | 6237| ## |On_Treatment_Target_Line |NA            |  278| ## |off_treatment            |Death         | 1292| ## |off_treatment            |progression   |  999| ## |off_treatment            |NA            |  870| ## |progression              |Death         | 5395| ## |progression              |NA            | 1841|"},{"path":"/articles/drug_episodes_lung.html","id":"descriptive-statistics-of-episodes-stratified-by-line-and-state","dir":"Articles","previous_headings":"","what":"Descriptive statistics of episodes stratified by line and state","title":"Constructing drug episodes for lung (cisplatin|carboplatin)","text":"Summary Episode Duration Line State (Excl. Death State)","code":""},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":"/articles/drug_episodes_lung.html","id":"restricted-mean-survival-time-survival-comparisons-across-lines","dir":"Articles","previous_headings":"Cut-points","what":"Restricted mean survival time survival: comparisons across lines","title":"Constructing drug episodes for lung (cisplatin|carboplatin)","text":"Restricted Mean Survival Time Comparisons Lines Therapy","code":""},{"path":[]},{"path":[]},{"path":"/articles/drug_episodes_lung.html","id":"competing-risks-regression","dir":"Articles","previous_headings":"Cut-points","what":"Competing Risks Regression","title":"Constructing drug episodes for lung (cisplatin|carboplatin)","text":"","code":"## Competing Risks Regression ##  ## Call: ## crr(ftime = fg_data$ftime, fstatus = fg_data$fstatus, cov1 = model.matrix(~factor(fg_data$group))[,  ##     -1]) ##  ##                          coef exp(coef) se(coef)       z p-value ## factor(fg_data$group)2 -0.020     0.980    0.271 -0.0736    0.94 ## factor(fg_data$group)3 -0.161     0.851    0.506 -0.3177    0.75 ##  ##                        exp(coef) exp(-coef)  2.5% 97.5% ## factor(fg_data$group)2     0.980       1.02 0.576  1.67 ## factor(fg_data$group)3     0.851       1.17 0.316  2.30 ##  ## Num. cases = 9565 ## Pseudo Log-likelihood = -1529  ## Pseudo likelihood ratio test = 0.11  on 2 df,"},{"path":"/articles/drug_episodes_pancreatic.html","id":"sample-size-breakdown","dir":"Articles","previous_headings":"","what":"Sample Size Breakdown","title":"Constructing drug episodes for pancreatic (gemcitabine)","text":"","code":"## The total number of pancreatic patients is 4612 ## The total number of pancreatic patients is 4612 ## The total number of pancreatic first-line patients is 2058 ## The total number of pancreatic second-line patients is 982 ## The total number of pancreatic third-line patients is 110 ##  ##  ## Table: Number of patients who received gemcitabine by line of therapy ##  ## |Line_of_Therapy | Number_of_Patients| ## |:---------------|------------------:| ## |First Line      |               2058| ## |Second Line     |                982| ## |Third Line      |                110| ## The total number of pancreatic patients with overlapping lines that were filtered out is 3150 ## The total number of pancreatic patients with single doses that were filtered out is 3026 ## The total number of pancreatic patients with treatment start pre-2010 that were filtered out is 0 ##  ##  ## Table: Filtered Transition Counts Table ##  ## |state                    |next_state    |    n| ## |:------------------------|:-------------|----:| ## |Death                    |NA            | 2389| ## |On_Treatment_Target_Line |off_treatment | 2084| ## |On_Treatment_Target_Line |progression   |  665| ## |On_Treatment_Target_Line |NA            |  218| ## |off_treatment            |Death         | 1245| ## |off_treatment            |progression   |  665| ## |off_treatment            |NA            |  174| ## |progression              |Death         | 1144| ## |progression              |NA            |  186|"},{"path":"/articles/drug_episodes_pancreatic.html","id":"descriptive-statistics-of-episodes-stratified-by-line-and-state","dir":"Articles","previous_headings":"","what":"Descriptive statistics of episodes stratified by line and state","title":"Constructing drug episodes for pancreatic (gemcitabine)","text":"Summary Episode Duration Line State (Excl. Death State)","code":""},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":"/articles/drug_episodes_pancreatic.html","id":"restricted-mean-survival-time-survival-comparisons-across-lines","dir":"Articles","previous_headings":"Cut-points","what":"Restricted mean survival time survival: comparisons across lines","title":"Constructing drug episodes for pancreatic (gemcitabine)","text":"Restricted Mean Survival Time Comparisons Lines Therapy","code":""},{"path":[]},{"path":[]},{"path":"/articles/drug_episodes_sarcoma.html","id":"sample-size-breakdown","dir":"Articles","previous_headings":"","what":"Sample Size Breakdown","title":"Constructing drug episodes for sarcoma (docetaxel,gemcitabine)","text":"","code":"## The total number of sarcoma patients is 313 ## The total number of sarcoma first-line patients is 183 ## The total number of sarcoma second-line patients is 80 ## The total number of sarcoma third-line patients is 30 ##  ##  ## Table: Number of patients who received docetaxel,gemcitabine by line of therapy ##  ## |Line_of_Therapy | Number_of_Patients| ## |:---------------|------------------:| ## |First Line      |                183| ## |Second Line     |                 80| ## |Third Line      |                 30| ## The total number of sarcoma patients with overlapping lines that were filtered out is 293 ## The total number of sarcoma patients with single doses that were filtered out is 293 ## Warning: There was 1 warning in `dplyr::summarise()`. ## ℹ In argument: `progression_date = min(progressiondate)`. ## Caused by warning in `min.default()`: ## ! no non-missing arguments to min; returning Inf ## The total number of sarcoma patients with treatment start pre-2010 that were filtered out is 2 ##  ##  ## Table: Filtered Transition Counts Table ##  ## |state                    |next_state    |   n| ## |:------------------------|:-------------|---:| ## |Death                    |NA            | 215| ## |On_Treatment_Target_Line |off_treatment | 188| ## |On_Treatment_Target_Line |progression   |  92| ## |On_Treatment_Target_Line |NA            |   9| ## |off_treatment            |Death         |  75| ## |off_treatment            |progression   |  85| ## |off_treatment            |NA            |  28| ## |progression              |Death         | 140| ## |progression              |NA            |  37|"},{"path":"/articles/drug_episodes_sarcoma.html","id":"descriptive-statistics-of-episodes-stratified-by-line-and-state","dir":"Articles","previous_headings":"","what":"Descriptive statistics of episodes stratified by line and state","title":"Constructing drug episodes for sarcoma (docetaxel,gemcitabine)","text":"Summary Episode Duration Line State (Excl. Death State)","code":""},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":"/articles/drug_episodes_sarcoma.html","id":"restricted-mean-survival-time-survival-comparisons-across-lines","dir":"Articles","previous_headings":"Cut-points","what":"Restricted mean survival time survival: comparisons across lines","title":"Constructing drug episodes for sarcoma (docetaxel,gemcitabine)","text":"Restricted Mean Survival Time Comparisons Lines Therapy","code":""},{"path":[]},{"path":[]},{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Nirupama Tamvada. Author, maintainer.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Tamvada N (2025). episodes: Build format drug episodes health-state transition modelling. R package version 0.0.0.9000, https://github.com/ntmv/episodes.","code":"@Manual{,   title = {episodes: Build and format drug episodes for health-state transition modelling},   author = {Nirupama Tamvada},   year = {2025},   note = {R package version 0.0.0.9000},   url = {https://github.com/ntmv/episodes}, }"},{"path":"/index.html","id":"episodes","dir":"","previous_headings":"","what":"Build and format drug episodes for health-state transition modelling","title":"Build and format drug episodes for health-state transition modelling","text":"episodes R package estimating transition probabilities prescription data. package specific functions catered Flatiron oncogenomic database can used cancer prescription datasets well estimate transition health states data. R package provides utilities generate: - Death tables - Summary tables state counts - Kaplan-Meier survival curves - Weibull shape scale parameter estimates designed integrate {targets} pipeline system reproducible modular workflows.","code":""},{"path":"/index.html","id":"id_-installation","dir":"","previous_headings":"","what":"📦 Installation","title":"Build and format drug episodes for health-state transition modelling","text":"can install development version package directly GitHub:","code":"# install.packages(\"devtools\") devtools::install_github(\"Regulatory-Science-Lab/episodes\")"},{"path":"/index.html","id":"id_-usage","dir":"","previous_headings":"","what":"🚀 Usage","title":"Build and format drug episodes for health-state transition modelling","text":"episodes pipeline can run single line run_episodes_pipeline function. takes tibble following columns: exact represents whether want search combination drugs (exact = FALSE) specific treatment given (exact = TRUE). : Prepare drug episode data Construct state transitions Estimate Weibull parameters per state Output results timestamped Excel file Excel file saved, MUST template Excel file compatible populated health state estimates saved dir (directory) specify (see h:\\PREDiCText\\nirupama\\weibull_estimates\\01_public_parameters_updatedNT.xlsx)","code":"run_episodes_pipeline(     tibble::tibble(         tumour = c(\"nsclc\", \"breast\", \"pancreatic\", \"thyroid\", \"crc\", \"sarcoma\"),         treatment = c(\"cisplatin|carboplatin\", \"capecitabine\", \"gemcitabine\",\"cabozantinib\", \"folfiri\", \"docetaxel,gemcitabine\"),         exact = c(FALSE, TRUE, TRUE, TRUE, TRUE, TRUE)     ), dir = \"YOUR DIRECTORY\" )"},{"path":"/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 Nirupama Tamvada Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"/reference/adjust_dates.html","id":null,"dir":"Reference","previous_headings":"","what":"Adjust Dates in Drug Episode Data — adjust_dates","title":"Adjust Dates in Drug Episode Data — adjust_dates","text":"Adjust Dates Drug Episode Data","code":""},{"path":"/reference/adjust_dates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Adjust Dates in Drug Episode Data — adjust_dates","text":"","code":"adjust_dates(drug_episodes)"},{"path":"/reference/adjust_dates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Adjust Dates in Drug Episode Data — adjust_dates","text":"drug_episodes data.frame drug episode-level information survival events.","code":""},{"path":"/reference/adjust_dates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Adjust Dates in Drug Episode Data — adjust_dates","text":"data.frame progression dates adjusted prevent patients progressing within week","code":""},{"path":"/reference/build_off_from_on.html","id":null,"dir":"Reference","previous_headings":"","what":"Build off-treatment segments following on-treatment — build_off_from_on","title":"Build off-treatment segments following on-treatment — build_off_from_on","text":"Identifies patients transitioned -treatment state -treatment segment, builds subsequent progression death timelines.","code":""},{"path":"/reference/build_off_from_on.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build off-treatment segments following on-treatment — build_off_from_on","text":"","code":"build_off_from_on(on_treatment, lines)"},{"path":"/reference/build_off_from_on.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build off-treatment segments following on-treatment — build_off_from_on","text":"on_treatment data.frame build_on_treatment() containing patient states next transitions. lines data.frame line-level treatment data.","code":""},{"path":"/reference/build_off_from_on.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build off-treatment segments following on-treatment — build_off_from_on","text":"data.frame -treatment segments, including subsequent progression death states.","code":""},{"path":"/reference/build_on_treatment.html","id":null,"dir":"Reference","previous_headings":"","what":"Build on-treatment state transitions — build_on_treatment","title":"Build on-treatment state transitions — build_on_treatment","text":"Identifies -treatment phase patients chemo line determines next state (progression, death, -treatment). Also adjusts line end dates accordingly.","code":""},{"path":"/reference/build_on_treatment.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build on-treatment state transitions — build_on_treatment","text":"","code":"build_on_treatment(lines, death_cutoff, progression_cutoff, next_line_cutoff)"},{"path":"/reference/build_on_treatment.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build on-treatment state transitions — build_on_treatment","text":"lines data.frame line-level information including treatment dates survival events. death_cutoff Days line end death consider direct transition death. progression_cutoff Days line end progression define direct progression. next_line_cutoff Days line end start next line define progression.","code":""},{"path":"/reference/build_on_treatment.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build on-treatment state transitions — build_on_treatment","text":"list two elements: on_treatment full -treatment data next states adjusted dates. on_treatment_clean reduced data.frame On_Treatment Death states.","code":""},{"path":"/reference/build_progression_from_on.html","id":null,"dir":"Reference","previous_headings":"","what":"Build progression events following on-treatment — build_progression_from_on","title":"Build progression events following on-treatment — build_progression_from_on","text":"Constructs progression segments patients progressed -treatment. Includes logic transitions next-line treatment death. Also returns corresponding death segment.","code":""},{"path":"/reference/build_progression_from_on.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build progression events following on-treatment — build_progression_from_on","text":"","code":"build_progression_from_on(on_treatment, lines)"},{"path":"/reference/build_progression_from_on.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build progression events following on-treatment — build_progression_from_on","text":"on_treatment data.frame build_on_treatment() containing patient states next transitions. lines data.frame line-level treatment data.","code":""},{"path":"/reference/build_progression_from_on.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build progression events following on-treatment — build_progression_from_on","text":"data.frame representing progression segments including Death applicable.","code":""},{"path":"/reference/collapse_overlapping_lines.html","id":null,"dir":"Reference","previous_headings":"","what":"Collapse overlapping treatment lines for each patient — collapse_overlapping_lines","title":"Collapse overlapping treatment lines for each patient — collapse_overlapping_lines","text":"Identifies merges treatment lines overlap time patient. Overlapping lines grouped merged one : Earliest linestartdate Latest lineenddate Combined linename (de-duplicated cleaned)","code":""},{"path":"/reference/collapse_overlapping_lines.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Collapse overlapping treatment lines for each patient — collapse_overlapping_lines","text":"","code":"collapse_overlapping_lines(ep_data)"},{"path":"/reference/collapse_overlapping_lines.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Collapse overlapping treatment lines for each patient — collapse_overlapping_lines","text":"ep_data data frame columns patientid, linestartdate, lineenddate, linename","code":""},{"path":"/reference/collapse_overlapping_lines.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Collapse overlapping treatment lines for each patient — collapse_overlapping_lines","text":"cleaned data frame one row per merged line columns: patientid, linestartdate, lineenddate, linename, linenumber","code":""},{"path":"/reference/collapse_overlapping_lines.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Collapse overlapping treatment lines for each patient — collapse_overlapping_lines","text":"","code":"if (FALSE) { # \\dontrun{  collapse_overlapping_lines(ep_data) } # }"},{"path":"/reference/construct_state_episodes.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper Functions and Main Constructor for State Episodes — construct_state_episodes","title":"Helper Functions and Main Constructor for State Episodes — construct_state_episodes","text":"functions help create cleaned structured multi-state transition datasets real-world treatment episode data, suitable survival analysis cost-effectiveness modeling.","code":""},{"path":"/reference/construct_state_episodes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper Functions and Main Constructor for State Episodes — construct_state_episodes","text":"","code":"construct_state_episodes(drug_episodes)"},{"path":"/reference/construct_state_episodes.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper Functions and Main Constructor for State Episodes — construct_state_episodes","text":"drug_episodes data.frame drug episode-level information survival events.","code":""},{"path":"/reference/construct_state_episodes.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Helper Functions and Main Constructor for State Episodes — construct_state_episodes","text":"data.frame structured drug transitions.","code":""},{"path":"/reference/death_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate a Monthly State and Death Transition Table — death_table","title":"Generate a Monthly State and Death Transition Table — death_table","text":"Creates monthly summary table showing number patients different states stratified gender, includes death transitions per state.","code":""},{"path":"/reference/death_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate a Monthly State and Death Transition Table — death_table","text":"","code":"death_table(drug_transitions, flatiron = TRUE)"},{"path":"/reference/death_table.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate a Monthly State and Death Transition Table — death_table","text":"drug_transitions data frame patient state transitions. flatiron Logical, whether join Flatiron demographics (default = TRUE).","code":""},{"path":"/reference/death_table.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate a Monthly State and Death Transition Table — death_table","text":"data frame summarizing transitions month relative treatment.","code":""},{"path":"/reference/fix_death_before_progression.html","id":null,"dir":"Reference","previous_headings":"","what":"Adjust incorrect death times — fix_death_before_progression","title":"Adjust incorrect death times — fix_death_before_progression","text":"Adjust incorrect death times","code":""},{"path":"/reference/fix_death_before_progression.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Adjust incorrect death times — fix_death_before_progression","text":"","code":"fix_death_before_progression(lines)"},{"path":"/reference/fix_death_before_progression.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Adjust incorrect death times — fix_death_before_progression","text":"lines formatted drug episodes data","code":""},{"path":"/reference/fix_death_before_progression.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Adjust incorrect death times — fix_death_before_progression","text":"adjusted death dates dataframe","code":""},{"path":"/reference/fix_line_gaps.html","id":null,"dir":"Reference","previous_headings":"","what":"Adjust line end dates to remove gaps between sequential treatment segments — fix_line_gaps","title":"Adjust line end dates to remove gaps between sequential treatment segments — fix_line_gaps","text":"Ensures continuity setting end date line one day next line’s start date, already align.","code":""},{"path":"/reference/fix_line_gaps.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Adjust line end dates to remove gaps between sequential treatment segments — fix_line_gaps","text":"","code":"fix_line_gaps(drug_transitions)"},{"path":"/reference/fix_line_gaps.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Adjust line end dates to remove gaps between sequential treatment segments — fix_line_gaps","text":"drug_transitions data.frame line transitions, sorted patient time.","code":""},{"path":"/reference/fix_line_gaps.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Adjust line end dates to remove gaps between sequential treatment segments — fix_line_gaps","text":"data.frame modified lineenddate eliminate temporal gaps treatment segments.","code":""},{"path":"/reference/generate_cutoffs.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate Cutoff Values for Treatment Gaps, Progression, and Death — generate_cutoffs","title":"Generate Cutoff Values for Treatment Gaps, Progression, and Death — generate_cutoffs","text":"function computes data-driven cutoff thresholds defining: gap treatment lines, time progression chemotherapy, time death patients one line known progression.","code":""},{"path":"/reference/generate_cutoffs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate Cutoff Values for Treatment Gaps, Progression, and Death — generate_cutoffs","text":"","code":"generate_cutoffs(drug_episodes)"},{"path":"/reference/generate_cutoffs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate Cutoff Values for Treatment Gaps, Progression, and Death — generate_cutoffs","text":"drug_episodes data.frame drug episodes, including columns: linestartdate, lineenddate, progression_date, death_date, chemo_line.","code":""},{"path":"/reference/generate_cutoffs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate Cutoff Values for Treatment Gaps, Progression, and Death — generate_cutoffs","text":"list three numeric cutoff values: next_line_cutoff Median number days next line treatment progression_cutoff 75th percentile time progression death_cutoff 75th percentile time death among single-line patients","code":""},{"path":"/reference/generate_cutoffs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Generate Cutoff Values for Treatment Gaps, Progression, and Death — generate_cutoffs","text":"cutoffs useful labeling transitions (e.g., censoring vs. death vs. progression) real-world oncology datasets. function calculates: next line cutoff 50th percentile (median) days end one line start next. progression cutoff 75th percentile time progression end chemo line. death cutoff 75th percentile time death, calculated patients single line known progression date. thresholds can used rule-based criteria modeling progression-free survival treatment state transitions.","code":""},{"path":"/reference/generate_cutoffs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate Cutoff Values for Treatment Gaps, Progression, and Death — generate_cutoffs","text":"","code":"if (FALSE) { # \\dontrun{   cutoffs <- generate_cutoffs(drug_episodes)   cutoffs$progression_cutoff } # }"},{"path":"/reference/initialize_lines.html","id":null,"dir":"Reference","previous_headings":"","what":"Structure episodes for state transitions — initialize_lines","title":"Structure episodes for state transitions — initialize_lines","text":"Structure episodes state transitions","code":""},{"path":"/reference/initialize_lines.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Structure episodes for state transitions — initialize_lines","text":"","code":"initialize_lines(drug_episodes)"},{"path":"/reference/initialize_lines.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Structure episodes for state transitions — initialize_lines","text":"drug_episodes data.frame drug episode-level information survival events.","code":""},{"path":"/reference/initialize_lines.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Structure episodes for state transitions — initialize_lines","text":"structured dataframe variables next_start chemo_line","code":""},{"path":"/reference/km_fit.html","id":null,"dir":"Reference","previous_headings":"","what":"Kaplan-Meier Fit by Prior Lines — km_fit","title":"Kaplan-Meier Fit by Prior Lines — km_fit","text":"Fits Kaplan-Meier survival curve based time treatment start end, stratified number prior lines treatment.","code":""},{"path":"/reference/km_fit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Kaplan-Meier Fit by Prior Lines — km_fit","text":"","code":"km_fit(   drug_transitions,   lines,   tumour = \"lung\",   save_path = \"H://PREDiCText//nirupama//weibull_estimates//survfit_km\" )"},{"path":"/reference/km_fit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Kaplan-Meier Fit by Prior Lines — km_fit","text":"drug_transitions data frame containing treatment transitions per patient. Must include patientid, state, linestartdate, lineenddate. lines data frame containing covariates prior_lines patient. Must include patientid prior_lines. tumour string identifier tumour type (used name saved output file). save_path Optional. Path directory .RData file saved. Default PREDiCText personal folder.","code":""},{"path":"/reference/km_fit.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Kaplan-Meier Fit by Prior Lines — km_fit","text":"survfit object Kaplan-Meier fit.","code":""},{"path":"/reference/prep_episode_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare Drug Episode Data from Flatiron drug episodes data — prep_episode_data","title":"Prepare Drug Episode Data from Flatiron drug episodes data — prep_episode_data","text":"function loads, filters, processes drug episode data cancer patients, focusing advanced metastatic treatments. cleans merges treatment episodes, filters based specified treatment given line 1, 2 3, integrates progression, mortality last contact data.","code":""},{"path":"/reference/prep_episode_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare Drug Episode Data from Flatiron drug episodes data — prep_episode_data","text":"","code":"prep_episode_data(   tumour = \"nsclc\",   treatment = \"cisplatin|carboplatin\",   drug_separator = \",\",   overlap_threshold = 1,   exact = FALSE )"},{"path":"/reference/prep_episode_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare Drug Episode Data from Flatiron drug episodes data — prep_episode_data","text":"tumour Character. Tumour type load. Must match drug episodes files Flatiron exploratory round folder. (e.g., \"nsclc\"). treatment Character. Regex string drug names filter (e.g., \"cisplatin|carboplatin\"). drug_separator character string separating multiple drugs linename. Default \",\". overlap_threshold Integer: number shared drugs required collapse lines. Default = 1. exact boolean: specify whether want exact match drug name combination therapy","code":""},{"path":"/reference/prep_episode_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare Drug Episode Data from Flatiron drug episodes data — prep_episode_data","text":"cleaned filtered data.frame drug episodes progression, death, follow-dates integrated","code":""},{"path":"/reference/prep_episode_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prepare Drug Episode Data from Flatiron drug episodes data — prep_episode_data","text":"","code":"if (FALSE) { # \\dontrun{   episodes <- prep_episode_data(tumour = \"nsclc\", treatment = \"cisplatin|carboplatin\")   head(episodes) } # }"},{"path":"/reference/run_episodes_pipeline.html","id":null,"dir":"Reference","previous_headings":"","what":"Run pipeline with custom tumour definitions — run_episodes_pipeline","title":"Run pipeline with custom tumour definitions — run_episodes_pipeline","text":"Run pipeline custom tumour definitions","code":""},{"path":"/reference/run_episodes_pipeline.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run pipeline with custom tumour definitions — run_episodes_pipeline","text":"","code":"run_episodes_pipeline(tumours, dir = \"\")"},{"path":"/reference/run_episodes_pipeline.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run pipeline with custom tumour definitions — run_episodes_pipeline","text":"tumours tibble columns \"tumour\", \"treatment\", \"exact\" dir Path directory RDS file saved.","code":""},{"path":"/reference/single_dose_clean.html","id":null,"dir":"Reference","previous_headings":"","what":"Clean and collapse single-dose cancer treatment lines — single_dose_clean","title":"Clean and collapse single-dose cancer treatment lines — single_dose_clean","text":"function identifies cleans single-day treatment lines longitudinal drug exposure dataset. attempts merge single-day lines adjacent lines share overlapping drugs, drops lines isolated non-mergeable.","code":""},{"path":"/reference/single_dose_clean.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clean and collapse single-dose cancer treatment lines — single_dose_clean","text":"","code":"single_dose_clean(ep_data, drug_separator = \",\", overlap_threshold = 1)"},{"path":"/reference/single_dose_clean.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Clean and collapse single-dose cancer treatment lines — single_dose_clean","text":"ep_data data frame containing line-level treatment data. Must include columns: patientid, linestartdate, lineenddate, linenumber, linename. drug_separator character string used split multiple drugs linename. Default \",\". overlap_threshold integer indicating minimum number overlapping drugs line names required consider lines similar enough merge. Default 1.","code":""},{"path":"/reference/single_dose_clean.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Clean and collapse single-dose cancer treatment lines — single_dose_clean","text":"cleaned data.frame columns (patientid, linestartdate, lineenddate, linename, linenumber), collapsed dropped single-day lines.","code":""},{"path":"/reference/single_dose_clean.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Clean and collapse single-dose cancer treatment lines — single_dose_clean","text":"supports threshold-based partial overlap merging reconstructs treatment episodes recomputing line numbers merging dropping.","code":""},{"path":"/reference/single_dose_clean.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Clean and collapse single-dose cancer treatment lines — single_dose_clean","text":"","code":"if (FALSE) { # \\dontrun{ cleaned_lines <- single_dose_clean(ep_data) } # }"},{"path":"/reference/state_exit_weibull_estimates.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate Weibull parameters for state transitions — state_exit_weibull_estimates","title":"Estimate Weibull parameters for state transitions — state_exit_weibull_estimates","text":"Fits Weibull models different treatment states (e.g., treatment, treatment, progression) using survival time covariates line therapy.","code":""},{"path":"/reference/state_exit_weibull_estimates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate Weibull parameters for state transitions — state_exit_weibull_estimates","text":"","code":"state_exit_weibull_estimates(drug_transitions, lines)"},{"path":"/reference/state_exit_weibull_estimates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate Weibull parameters for state transitions — state_exit_weibull_estimates","text":"drug_transitions dataframe treatment episodes start/end dates states. lines dataframe treatment line data including prior lines next line dates.","code":""},{"path":"/reference/state_exit_weibull_estimates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate Weibull parameters for state transitions — state_exit_weibull_estimates","text":"tibble Weibull shape scale estimates transition state.","code":""},{"path":"/reference/state_numbers_summary.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarize Patient Transitions Across States — state_numbers_summary","title":"Summarize Patient Transitions Across States — state_numbers_summary","text":"function computes summary counts transitions treatment states (e.g., -treatment progression, progression death), optionally joined demographic gender data Flatiron.","code":""},{"path":"/reference/state_numbers_summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarize Patient Transitions Across States — state_numbers_summary","text":"","code":"state_numbers_summary(drug_transitions, flatiron = TRUE)"},{"path":"/reference/state_numbers_summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarize Patient Transitions Across States — state_numbers_summary","text":"drug_transitions data frame containing patient state transitions. Must include least patientid, linestartdate, lineenddate, state. flatiron Logical. TRUE, function join Flatiron demographic data (hardcoded path) annotate patient gender.","code":""},{"path":"/reference/state_numbers_summary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarize Patient Transitions Across States — state_numbers_summary","text":"data frame total transitions defined states patient sex distribution. Includes: N_on_to_prog Transitions -treatment progression N_on_to_death Transitions -treatment death N_on_to_off Transitions -treatment -treatment N_off_to_prog Transitions -treatment progression N_off_to_death Transitions -treatment death N_prog_to_death Transitions progression death N_total Total number unique patients N_prop_F Proportion female patients N_prop_M Proportion male patients","code":""},{"path":"/reference/write_death_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Write death table to Workbook This function appends new Weibull scale and shape parameter estimates to an existing Excel workbook. It modifies the workbook in memory and returns the updated workbook object (without saving yet). — write_death_table","title":"Write death table to Workbook This function appends new Weibull scale and shape parameter estimates to an existing Excel workbook. It modifies the workbook in memory and returns the updated workbook object (without saving yet). — write_death_table","text":"Write death table Workbook function appends new Weibull scale shape parameter estimates existing Excel workbook. modifies workbook memory returns updated workbook object (without saving yet).","code":""},{"path":"/reference/write_death_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Write death table to Workbook This function appends new Weibull scale and shape parameter estimates to an existing Excel workbook. It modifies the workbook in memory and returns the updated workbook object (without saving yet). — write_death_table","text":"","code":"write_death_table(wb, death_table, tumour = \"lung\", treatment = \"cisplatin\")"},{"path":"/reference/write_death_table.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Write death table to Workbook This function appends new Weibull scale and shape parameter estimates to an existing Excel workbook. It modifies the workbook in memory and returns the updated workbook object (without saving yet). — write_death_table","text":"wb openxlsx workbook object loaded R memory. death_table table death state counts month death_table function tumour string indicating tumour type (e.g., \"lung\", \"breast\"). treatment string indicating treatment name (e.g., \"cisplatin\").","code":""},{"path":"/reference/write_death_table.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Write death table to Workbook This function appends new Weibull scale and shape parameter estimates to an existing Excel workbook. It modifies the workbook in memory and returns the updated workbook object (without saving yet). — write_death_table","text":"modified workbook (wb) new entries appended appropriate sheets.","code":""},{"path":"/reference/write_death_table.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Write death table to Workbook This function appends new Weibull scale and shape parameter estimates to an existing Excel workbook. It modifies the workbook in memory and returns the updated workbook object (without saving yet). — write_death_table","text":"Appends state number sample size counts \"1.20_State_Numbers\" sheet. Adds horizontal border (line) new block inserted rows. Note: must save workbook separately modifications using saveWorkbook().","code":""},{"path":"/reference/write_params_helper.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function to append parameters to a specific workbook sheet — write_params_helper","title":"Helper function to append parameters to a specific workbook sheet — write_params_helper","text":"helper function finds next empty row specified Excel sheet, writes block data, adds thin horizontal border line block, returns modified workbook.","code":""},{"path":"/reference/write_params_helper.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function to append parameters to a specific workbook sheet — write_params_helper","text":"","code":"write_params_helper(wb, param_dat, sheet_name = \"1.6_Weibull_Shape_SoC\")"},{"path":"/reference/write_params_helper.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function to append parameters to a specific workbook sheet — write_params_helper","text":"wb openxlsx workbook object. param_dat data frame containing block parameters append. sheet_name string specifying sheet write .","code":""},{"path":"/reference/write_params_helper.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Helper function to append parameters to a specific workbook sheet — write_params_helper","text":"modified workbook (wb) writing styling.","code":""},{"path":"/reference/write_params_helper.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Helper function to append parameters to a specific workbook sheet — write_params_helper","text":"Automatically detects next available row based existing data. overwrite previous entries. Adds visual separator line data block.","code":""},{"path":"/reference/write_shape_scale.html","id":null,"dir":"Reference","previous_headings":"","what":"Write Weibull Shape and Scale Parameters to Workbook — write_shape_scale","title":"Write Weibull Shape and Scale Parameters to Workbook — write_shape_scale","text":"function appends new Weibull scale shape parameter estimates existing Excel workbook. modifies workbook memory returns updated workbook object (without saving yet).","code":""},{"path":"/reference/write_shape_scale.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Write Weibull Shape and Scale Parameters to Workbook — write_shape_scale","text":"","code":"write_shape_scale(wb, params_results, tumour = \"lung\", treatment = \"cisplatin\")"},{"path":"/reference/write_shape_scale.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Write Weibull Shape and Scale Parameters to Workbook — write_shape_scale","text":"wb openxlsx workbook object loaded R memory. params_results data frame containing parameter estimates, including state_transition, scale, shape, scale_lci, scale_uci, shape_lci, shape_uci columns fit_weibull_by_state function tumour string indicating tumour type (e.g., \"lung\", \"breast\"). treatment string indicating treatment name (e.g., \"cisplatin\").","code":""},{"path":"/reference/write_shape_scale.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Write Weibull Shape and Scale Parameters to Workbook — write_shape_scale","text":"modified workbook (wb) new entries appended appropriate sheets.","code":""},{"path":"/reference/write_shape_scale.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Write Weibull Shape and Scale Parameters to Workbook — write_shape_scale","text":"Appends scale parameters \"1.7_Weibull_Scale_SoC\" sheet. Appends shape parameters \"1.6_Weibull_Shape_SoC\" sheet. Adds horizontal border (line) new block inserted rows. Note: must save workbook separately modifications using saveWorkbook().","code":""},{"path":"/reference/write_summary.html","id":null,"dir":"Reference","previous_headings":"","what":"Write sample sizes in states to Workbook This function appends new Weibull scale and shape parameter estimates to an existing Excel workbook. It modifies the workbook in memory and returns the updated workbook object (without saving yet). — write_summary","title":"Write sample sizes in states to Workbook This function appends new Weibull scale and shape parameter estimates to an existing Excel workbook. It modifies the workbook in memory and returns the updated workbook object (without saving yet). — write_summary","text":"Write sample sizes states Workbook function appends new Weibull scale shape parameter estimates existing Excel workbook. modifies workbook memory returns updated workbook object (without saving yet).","code":""},{"path":"/reference/write_summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Write sample sizes in states to Workbook This function appends new Weibull scale and shape parameter estimates to an existing Excel workbook. It modifies the workbook in memory and returns the updated workbook object (without saving yet). — write_summary","text":"","code":"write_summary(wb, summary_table, tumour = \"lung\", treatment = \"cisplatin\")"},{"path":"/reference/write_summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Write sample sizes in states to Workbook This function appends new Weibull scale and shape parameter estimates to an existing Excel workbook. It modifies the workbook in memory and returns the updated workbook object (without saving yet). — write_summary","text":"wb openxlsx workbook object loaded R memory. summary_table table summary counts state_numbers_summary function tumour string indicating tumour type (e.g., \"lung\", \"breast\"). treatment string indicating treatment name (e.g., \"cisplatin\").","code":""},{"path":"/reference/write_summary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Write sample sizes in states to Workbook This function appends new Weibull scale and shape parameter estimates to an existing Excel workbook. It modifies the workbook in memory and returns the updated workbook object (without saving yet). — write_summary","text":"modified workbook (wb) new entries appended appropriate sheets.","code":""},{"path":"/reference/write_summary.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Write sample sizes in states to Workbook This function appends new Weibull scale and shape parameter estimates to an existing Excel workbook. It modifies the workbook in memory and returns the updated workbook object (without saving yet). — write_summary","text":"Appends state number sample size counts \"1.20_State_Numbers\" sheet. Adds horizontal border (line) new block inserted rows. Note: must save workbook separately modifications using saveWorkbook().","code":""}]
